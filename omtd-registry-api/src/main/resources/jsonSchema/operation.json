{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "https://raw.githubusercontent.com/openminted/omtd-registry/develop/omtd-registry-api/src/main/resources/jsonSchema/operation.json",
  "extends": {
    "$ref": "identifiableResource.json"
  },
  "allOf": [
    {
      "$ref": "identifiableResource.json"
    }
  ],
  "properties": {
    "component": {
      "description": "The id of the application component that was executed.",
      "title": "Component ID",
      "type": "string"
    },
    "corpus": {
      "properties": {
        "input": {
          "description": "The id of the input corpus.",
          "title": "Input Corpus ID",
          "type": "string"
        },
        "output": {
          "description": "The id of the result corpus.",
          "title": "Output Corpus ID",
          "type": "string"
        }
      },
      "required": [
        "input"
      ],
      "type": "object"
    },
    "errors": {
      "type": "array",
      "description": "A List of error messages",
      "items": {
        "type": "object",
        "description": "The Error Object",
        "properties": {
          "message": {
            "description": "The error message.",
            "title": "Error message",
            "type": "string"
          },
          "timestamp": {
            "description": "The time the error occured.",
            "title": "Error Date",
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "message",
          "timestamp"
        ]
      }
    },
    "date": {
      "properties": {
        "finished": {
          "description": "When the workflow was finished.",
          "title": "Finished Date",
          "type": "string",
          "format": "date-time"
        },
        "started": {
          "description": "When the workflow was started.",
          "title": "Started Date",
          "type": "string",
          "format": "date-time"
        },
        "submitted": {
          "description": "When the workflow was submitted.",
          "title": "Submitted Date",
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "submitted"
      ],
      "type": "object"
    },
    "status": {
      "description": "The status of the operation",
      "title": "Operation status",
      "type": "string"
    },
    "monitoring" : {
      "description": "The total runtime of a process",
      "title": "Monitoring Information",
      "type": "object",
      "properties": {
        "cpu_milliseconds": {
          "description": "The total runtime in milliseconds time * (cpu_cores)",
          "title": "CPU Milliseconds",
          "type": "integer"
        },
        "cpu_count": {
          "description": "The total number of CPU cores",
          "title": "CPU Cores",
          "type": "integer"
        },
        "vm_count": {
          "description": "The number of VMs used for the process",
          "title": "VM Count",
          "type": "integer"
        },
        "ram_usage": {
          "description": "RAM Usage",
          "title": "RAM Usage",
          "type": "integer"
        }
      }
    }
  },
  "required": [
    "component",
    "date",
    "corpus",
    "status"
  ],
  "type": "object"
}